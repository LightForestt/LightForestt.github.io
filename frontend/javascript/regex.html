<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>匹配模式 |  learning 🤔</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="ing">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.8a3e4be4.js" as="script"><link rel="preload" href="/assets/js/2.b1c453a7.js" as="script"><link rel="preload" href="/assets/js/33.77cf9e9a.js" as="script"><link rel="prefetch" href="/assets/js/10.a1484098.js"><link rel="prefetch" href="/assets/js/11.b70f6910.js"><link rel="prefetch" href="/assets/js/12.aa4e4756.js"><link rel="prefetch" href="/assets/js/13.24822fb7.js"><link rel="prefetch" href="/assets/js/14.ba83d711.js"><link rel="prefetch" href="/assets/js/15.ce56a167.js"><link rel="prefetch" href="/assets/js/16.510d6dca.js"><link rel="prefetch" href="/assets/js/17.41412f1e.js"><link rel="prefetch" href="/assets/js/18.8143a9b6.js"><link rel="prefetch" href="/assets/js/19.dfc55bfb.js"><link rel="prefetch" href="/assets/js/20.d149cd7c.js"><link rel="prefetch" href="/assets/js/21.282166c1.js"><link rel="prefetch" href="/assets/js/22.c878d45b.js"><link rel="prefetch" href="/assets/js/23.7ea9cee2.js"><link rel="prefetch" href="/assets/js/24.0a65f294.js"><link rel="prefetch" href="/assets/js/25.cf952e8f.js"><link rel="prefetch" href="/assets/js/26.fa6a6b52.js"><link rel="prefetch" href="/assets/js/27.986b9955.js"><link rel="prefetch" href="/assets/js/28.cd904e4d.js"><link rel="prefetch" href="/assets/js/29.22c8bd30.js"><link rel="prefetch" href="/assets/js/3.0b8b26d0.js"><link rel="prefetch" href="/assets/js/30.f974ab27.js"><link rel="prefetch" href="/assets/js/31.c099b303.js"><link rel="prefetch" href="/assets/js/32.eb8d6a86.js"><link rel="prefetch" href="/assets/js/34.67e1bc26.js"><link rel="prefetch" href="/assets/js/35.acda1906.js"><link rel="prefetch" href="/assets/js/36.8f514314.js"><link rel="prefetch" href="/assets/js/37.75d78737.js"><link rel="prefetch" href="/assets/js/38.e372ed82.js"><link rel="prefetch" href="/assets/js/39.31d074d8.js"><link rel="prefetch" href="/assets/js/4.e7c996f5.js"><link rel="prefetch" href="/assets/js/40.a0159801.js"><link rel="prefetch" href="/assets/js/41.633bb894.js"><link rel="prefetch" href="/assets/js/42.2ef5b25c.js"><link rel="prefetch" href="/assets/js/43.f3f083c8.js"><link rel="prefetch" href="/assets/js/44.e18663a3.js"><link rel="prefetch" href="/assets/js/45.0853c943.js"><link rel="prefetch" href="/assets/js/46.bb71b1df.js"><link rel="prefetch" href="/assets/js/47.806d670b.js"><link rel="prefetch" href="/assets/js/48.9a81b491.js"><link rel="prefetch" href="/assets/js/49.cc728521.js"><link rel="prefetch" href="/assets/js/5.6eff8140.js"><link rel="prefetch" href="/assets/js/50.64a8e83d.js"><link rel="prefetch" href="/assets/js/51.9125457b.js"><link rel="prefetch" href="/assets/js/52.17eb17a0.js"><link rel="prefetch" href="/assets/js/6.17d5dd20.js"><link rel="prefetch" href="/assets/js/7.576da1bf.js"><link rel="prefetch" href="/assets/js/8.6fffe5ac.js"><link rel="prefetch" href="/assets/js/9.6ab3dd2a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name"> learning 🤔</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>frontend</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>javascript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/javascript/promise_await_async/" class="sidebar-link">promise的前世今生</a></li><li><a href="/frontend/javascript/regex.html" aria-current="page" class="active sidebar-link">正则表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#匹配模式" class="sidebar-link">匹配模式</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#创建正则对象" class="sidebar-link">创建正则对象</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#或" class="sidebar-link">或 |</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#原子表" class="sidebar-link">原子表 []</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#原子组" class="sidebar-link">原子组 ()</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#正则中的转义" class="sidebar-link">正则中的转义</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#边界限定" class="sidebar-link">边界限定</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#元字符-大小写字母都是相对的-反向的" class="sidebar-link">元字符 （大小写字母都是相对的 反向的）</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#汉字与字符属性" class="sidebar-link">汉字与字符属性</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#lastindex属性" class="sidebar-link">lastIndex属性</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#重复匹配" class="sidebar-link">重复匹配</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#多个正则校验一个-str" class="sidebar-link">多个正则校验一个 str</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#matchall及其polyfill" class="sidebar-link">matchAll及其polyfill</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#正则方法" class="sidebar-link">正则方法</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#字符串方法" class="sidebar-link">字符串方法</a></li><li class="sidebar-sub-header"><a href="/frontend/javascript/regex.html#断言匹配" class="sidebar-link">断言匹配</a></li></ul></li><li><a href="/frontend/javascript/base.html" class="sidebar-link">js基础</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>html</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>browser</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>typescript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>vuejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>threejs</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>backend</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>basic</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="匹配模式"><a href="#匹配模式" class="header-anchor">#</a> 匹配模式</h2> <ul><li>g 全局匹配</li> <li>i 忽略大小写</li> <li>m 每一行都单独处理，将开始(^)和结束($)字符视为在多行上工作</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    1 xcf
    2 xcf
    3 xcf text
    4 xcf
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> res <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s*\d+\s+xcf$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gm</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>s 匹配任何字符 把所有行都视为同一行</li> <li>多个匹配模式可以混合使用，顺序无所谓 <code>/gi</code></li> <li>u 将模式视为 unicode 序列点的序列
<ul><li>用来匹配宽字符</li> <li>结合<code>\p{L}</code>字母</li> <li>结合<code>\p{P}</code> 符号</li> <li>结合<code>\p{sc=Han}</code>匹配汉字</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">xcf.,=徐长帆</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\p{sc=Han}+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gu</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>y 连续匹配，如果在匹配时候遇到不符合条件的字符，立即停止匹配。使用 y 模式后如果从 lastIndex 开始匹配不成功就不继续匹配了，不会忽略不满足条件的字符。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;xuxchangfan&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">x</span><span class="token regex-delimiter">/</span><span class="token regex-flags">y</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre></div><h2 id="创建正则对象"><a href="#创建正则对象" class="header-anchor">#</a> 创建正则对象</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 字面量</span>
<span class="token keyword">let</span> r1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">u</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token comment">// new 对象        字符  匹配模式</span>
<span class="token keyword">let</span> r2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;u&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="或"><a href="#或" class="header-anchor">#</a> 或 |</h2> <ul><li>左右两边任意满足一个条件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;xx@163.com&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 或 | 左右两边任意满足一个条件</span>
<span class="token keyword">let</span> r3 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">xcf|.cm</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r3<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><h2 id="原子表"><a href="#原子表" class="header-anchor">#</a> 原子表 []</h2> <ul><li>匹配数组中的任意一个字符,就相当于把当前数组中的串拆成一个个单独的字符，每个字符之间是或的关系，使用 match 方法的时候，会匹配字符串中所有符合原子表中的每一项(全局匹配的情况下)。</li> <li><code>/[a-z]/</code> 区间匹配，匹配 a-z 的字母</li> <li><code>/[0-9]/</code> 匹配 0-9,区间匹配的时候只能升序不能降序</li> <li><code>/[^xu]/</code>排除匹配</li> <li><code>/[().+]/</code>在原子表中的括号就代表括号本身。不代表原子组，原子表中的字符<code>().+</code>是字符本意。</li> <li>匹配所有字符 <code>/[\s\S]/</code> <code>[\d\D]</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'xuxuxchangfan'</span>
<span class="token keyword">let</span> r4 <span class="token operator">=</span> <span class="token operator">/</span><span class="token punctuation">[</span>xu<span class="token punctuation">]</span><span class="token operator">/</span>g  代表取出所有的xu

<span class="token keyword">let</span> r5 <span class="token operator">=</span> <span class="token operator">/</span><span class="token punctuation">[</span><span class="token operator">^</span>xu<span class="token punctuation">]</span><span class="token operator">/</span>g 代表取出除了xu所有的
str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>r4<span class="token punctuation">)</span> <span class="token comment">//[&quot;x&quot;, &quot;u&quot;, &quot;x&quot;, &quot;u&quot;, &quot;x&quot;]</span>
str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>r2<span class="token punctuation">)</span> <span class="token comment">//[&quot;c&quot;, &quot;h&quot;, &quot;a&quot;, &quot;n&quot;, &quot;g&quot;, &quot;f&quot;, &quot;a&quot;, &quot;n&quot;]</span>

</code></pre></div><h2 id="原子组"><a href="#原子组" class="header-anchor">#</a> 原子组 ()</h2> <ul><li>使用原子组的方式
<ul><li><code>\0</code>就代表整个匹配内容</li> <li>在正则表达式用通过<code>\1</code>来取出第 1 原子组的内容</li> <li>在<code>String.prototype.replace</code>中通过<code>$1</code>解析第一个原子组的内容，<code>$&amp;</code>代表当前匹配内容，$`代表内容前一个字符，<code>\$'</code>代表当前匹配内容后一个字符。</li> <li>为原子组其别名<code>/(?&lt;name&gt;xu)/</code>，在使用的时候通过别名使用，<code>'xu'.replace(reg,'&lt;h1&gt;$&lt;name&gt;&lt;/h1&gt;')</code>，别名可以在<code>exec()</code>方法返回来的数据中使用（<code>groups</code>中的<code>key</code>值）。</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 别名</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;span id='id1'&gt;lightforestt&lt;span&gt;
    &lt;h1 id='id2'&gt;nice&lt;h1&gt;
    &lt;div id='id3'&gt;cool&lt;div&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;els&gt;&lt;(span|h1|div)[\s\S]*?&gt;)(?&lt;content&gt;[\s\S]*?)&lt;\2&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> iterator <span class="token keyword">of</span> str<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>在<code>String.prototype.replace</code>方法中的回调方法，回调方法中会传入参数，通过参数获得原子组中的内容，默认会把所有的原子组按顺序传入回调方法
<ul><li>replace 方法回调方法入参详解：</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>content<span class="token punctuation">.</span>innerHTML<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
  reg<span class="token punctuation">,</span> <span class="token comment">// 正则表达式</span>
  <span class="token punctuation">(</span>
    <span class="token comment">// 回调方法</span>
    search<span class="token punctuation">,</span> <span class="token comment">//匹配到的字符</span>
    p1<span class="token punctuation">,</span> <span class="token comment">//第一个原子组</span>
    p2<span class="token punctuation">,</span> <span class="token comment">//第二个原子组</span>
    index<span class="token punctuation">,</span> <span class="token comment">//匹配正则的子串索引位置</span>
    source <span class="token comment">//原字符串</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> class=&quot;hot&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>不记录分组，通过<code>(?:com|org|cn)</code>忽略当前分组，不会记录到匹配出来的对象中(<code>match()</code>),也就无法使用<code>$1 \1 p1</code>等获取原子组</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">2020-04-06</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> date_2 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">2020/04/06</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> date_3 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">2020-04/06</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// 使用原子表和原子组 \1就代表第一个原子组</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d{4}([/-])\d{2}\1\d{2}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2020-04-06</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date_2<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2020/04/06</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date_3<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>

<span class="token comment">// $2解析原子组</span>
<span class="token keyword">let</span> els <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;div&gt;
        xcf
    &lt;/div&gt;
    &lt;h1&gt; nice &lt;/h1&gt;
    &lt;h5&gt; cool &lt;/h5&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s*&lt;(h[1-6])&gt;([\s\S]*)&lt;\/\1&gt;\s*$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gm</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> rs <span class="token operator">=</span> els<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;p&gt;$2&lt;/p&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 通过方法的默认传参获得原子组</span>
<span class="token keyword">let</span> els <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;div&gt;
        xcf
    &lt;/div&gt;
    &lt;h1&gt; nice &lt;/h1&gt;
    &lt;h5&gt; cool &lt;/h5&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\s*&lt;(h[1-6])&gt;([\s\S]*)&lt;\/\1&gt;\s*$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gm</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> rs <span class="token operator">=</span> els<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">p0<span class="token punctuation">,</span> p1<span class="token punctuation">,</span> p2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;p&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>p2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rs<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 邮箱验证使用原子组</span>
<span class="token comment">//原子组 验证邮箱</span>
<span class="token keyword">let</span> email <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">lightforestt@qq.com</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> email_2 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">xxx@163.com.cn</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> email_3 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">xxx@qq.com</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[\w]+@(\w+\.)+(com|cn|org)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
  reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">,</span>
  reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>email_2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// true true true</span>
  reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>email_3<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="正则中的转义"><a href="#正则中的转义" class="header-anchor">#</a> 正则中的转义</h2> <ul><li><code>.</code> 点在正则中代表除了换行外的所有字符</li> <li><code>\d</code> 代表数字</li> <li><code>'\d' '\.'</code>字符串中的单个反斜是无效的，需要<code>'\\d' '\\.'</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> price <span class="token operator">=</span> <span class="token string">&quot;10.5&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> r5 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.\d+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> r5str <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

r5<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
price<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>r5<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// .5</span>
</code></pre></div><h2 id="边界限定"><a href="#边界限定" class="header-anchor">#</a> 边界限定</h2> <ul><li><code>^</code> 限定起始位置</li> <li><code>$</code> 限定结束位置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> r6 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d{0,1}\.\d{3,6}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'[name=&quot;test&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keyup&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>r6<span class="token punctuation">)</span>
    <span class="token operator">?</span> <span class="token string">&quot;nice&quot;</span>
    <span class="token operator">:</span> <span class="token string">&quot;填入数字，整数0-1位 小数3-6位&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="元字符-大小写字母都是相对的-反向的"><a href="#元字符-大小写字母都是相对的-反向的" class="header-anchor">#</a> 元字符 （大小写字母都是相对的 反向的）</h2> <ul><li>`` 空格也是基本字符 同 abcd 一样</li> <li><code>\d</code> 0-9 的数字</li> <li><code>\D</code> 除了数字</li> <li><code>\s</code> 空格 换行符（\n）</li> <li><code>\S</code> 除了 空格 换行符（\n）</li> <li><code>\w</code> 字母，数字，下划线 （囊括了<code>\d</code>）</li> <li><code>\W</code> 除了字母数字和下划线</li> <li>'.' 除了换行符的任意字符 囊括了 <code>\d \w</code>,也能匹配空格键，但是不能匹配换行键，和<code>\s</code>有区别。</li></ul> <h2 id="汉字与字符属性"><a href="#汉字与字符属性" class="header-anchor">#</a> 汉字与字符属性</h2> <ul><li>结合<code>\p{L}</code> 表示字母</li> <li>结合<code>\p{P}</code> 表示符号</li> <li>结合<code>\p{sc=Han}</code> 表示匹配汉字</li></ul> <h2 id="lastindex属性"><a href="#lastindex属性" class="header-anchor">#</a> <code>lastIndex</code>属性</h2> <blockquote><p>标志当前正则执行匹配(结合<code>exec()</code>方法使用)的位置</p></blockquote> <ul><li>每次 exec 都执行一次正则匹配</li> <li>lastindex 记录上次匹配结束的位置，当且仅当匹配模式为全局匹配时生效</li> <li>整个过程类似生成器的 next()方法。这里是每 exec 一次，lastindex 都会向后挪动一位。</li> <li>和 String.prototype.match 方法的区别是，match 会一次性将所有匹配的内容全都返回来，并且没有 index 属性，不方便操作。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;lightforestt&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\w</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// u</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><h2 id="重复匹配"><a href="#重复匹配" class="header-anchor">#</a> 重复匹配</h2> <ul><li>描述数量，都是贪婪匹配，如果同时满足，会尽可能的多匹配字符，如果跟在原子组后，会影响整个原子组
<ul><li><code>*</code> 0-n</li> <li><code>+</code> 1-n</li> <li><code>?</code> 0-1</li> <li><code>{1,5}</code> 1-5</li></ul></li> <li>禁止贪婪 <code>/hd*?/</code>，在设置重复匹配时加上问号会禁止贪婪，尽可能匹配最少的数量</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>lightforestt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>nice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>cool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> main <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 禁止贪婪匹配,可以尽可能匹配少的内容，这样就能匹配&lt;span&gt;xuichanfan&lt;/span&gt;,否则将匹配多个&lt;span&gt;</span>
    main<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> main<span class="token punctuation">.</span>innerHTML<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
      <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;span&gt;([\s\S]+?)&lt;\/span&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h4 style='color:red;'&gt;$1-test&lt;/h4&gt;</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="多个正则校验一个-str"><a href="#多个正则校验一个-str" class="header-anchor">#</a> 多个正则校验一个 str</h2> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'[name=&quot;test&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keyup&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> regs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-z]{2,5}[0-9]{1,3}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[A-Z]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> state <span class="token operator">=</span> regs<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="matchall及其polyfill"><a href="#matchall及其polyfill" class="header-anchor">#</a> <code>matchAll</code>及其<code>polyfill</code></h2> <ul><li><code>matchAll()</code>方法可以配合全局匹配模式获得一个当前所有匹配内容的迭代器,这样就可以通过获取每个迭代中的原子组内容，这是<code>match()</code>中得不到的，<code>match()</code>之中只有当前匹配的串。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;span&gt;lightforestt&lt;span&gt;
    &lt;h1&gt;nice&lt;h1&gt;
    &lt;div&gt;cool&lt;div&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(&lt;(?:span|h1|div)&gt;)([\s\S]*?)\1</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> iterator <span class="token keyword">of</span> str<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>matchAll-polyfill</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">matchAll</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> rs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> temp<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>temp <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    rs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> rs<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="正则方法"><a href="#正则方法" class="header-anchor">#</a> 正则方法</h2> <ul><li><code>RegExp.prototype.test</code>字符串是否通过正则检测，返回是否通过检测</li> <li><code>RegExp.prototype.exec</code>执行一次匹配，返回匹配结果，匹配成功后<code>lastIndex</code>+1</li></ul> <h2 id="字符串方法"><a href="#字符串方法" class="header-anchor">#</a> 字符串方法</h2> <ul><li><code>String.prototype.match</code>寻找匹配内容，获取匹配内容的每个原子组,当加入全局查找时，就会丢弃原子组的内容，返回每一个匹配的完整的字符串,如果即需要全局查找又需要获取每个院子组就可以通过使用 matchAll 达到目的,使用 exec 操作也是可以达到目的</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;For more information, see Chapter 3.4.5.1&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">see (chapter \d+(\.\d)*)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> found <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>found<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//  [ 'see Chapter 3.4.5.1',</span>
<span class="token comment">//        'Chapter 3.4.5.1',</span>
<span class="token comment">//        '.1',</span>
<span class="token comment">//        index: 22,</span>
<span class="token comment">//        input: 'For more information, see Chapter 3.4.5.1' ]</span>

<span class="token comment">// 'see Chapter 3.4.5.1' 是整个匹配。</span>
<span class="token comment">// 'Chapter 3.4.5.1' 被'(chapter \d+(\.\d)*)'捕获。</span>
<span class="token comment">// '.1' 是被'(\.\d)'捕获的最后一个值。</span>
<span class="token comment">// 'index' 属性(22) 是整个匹配从零开始的索引。</span>
<span class="token comment">// 'input' 属性是被解析的原始字符串。</span>

<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;For more information, see Chapter 3.4.5.1,see Chapter 3.4.5.2&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">see (chapter \d+(\.\d)*)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span> <span class="token comment">// 加入全局查找g</span>
<span class="token keyword">var</span> found <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>found<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//  [&quot;see Chapter 3.4.5.1&quot;, &quot;see Chapter 3.4.5.2&quot;] 没有打印出匹配的每个原子组的内容</span>
</code></pre></div><ul><li><code>String.prototype.matchAll</code></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> regexp <span class="token operator">=</span> <span class="token function">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;foo[a-z]*&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;table football, foosball&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> matches <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> match <span class="token keyword">of</span> matches<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Found </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> start=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>match<span class="token punctuation">.</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> end=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>match<span class="token punctuation">.</span>index <span class="token operator">+</span>
      match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 获取每次匹配内容开始位置的索引</span>
<span class="token comment">// expected output: &quot;Found football start=6 end=14.&quot;</span>
<span class="token comment">// expected output: &quot;Found foosball start=16 end=24.&quot;</span>

<span class="token comment">// 数组from方法会自动调用迭代器去获取每个元素然后形成一个数组  也可以使用...或者for...of去遍历</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Array [ &quot;football&quot;, &quot;foosball&quot; ]</span>
</code></pre></div><ul><li><code>String.prototype.search</code>搜索符合正则的内容，返回内容索引</li> <li><code>String.prototype.split</code>拆分字符串</li> <li><code>String.prototype.replace</code>替换</li></ul> <h2 id="断言匹配"><a href="#断言匹配" class="header-anchor">#</a> 断言匹配</h2> <ul><li>判断上下文环境的匹配，当字符串本身相同的时候，但是前后字符不同，可以通过断言匹配来检测。</li> <li>注意：断言匹配虽然在括号中，但它不是原子组。</li> <li><code>(?=)</code>匹配后侧内容是什么</li> <li><code>(?&lt;=)</code>匹配前面内容是什么</li> <li><code>(?!)</code>匹配后侧不是该内容的字符串</li> <li><code>(?&lt;!)</code>匹配前边不是该内容的字符串</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    lightforestt
    lightforesttnice
    lightforestt
    lightforesttnice123
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// 匹配后边紧跟着nice的字符串 尽管字符串本身相同 相当于判断上下文</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">lightforestt(?=nice)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第二行</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第四行</span>
<span class="token comment">//同时约束前后 仅有第二行满足条件</span>
<span class="token keyword">let</span> reg2 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=ok)lightforestt(?=nice)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg2<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第二行</span>

<span class="token comment">// 替换域名</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;a href='www.baidu.com'&gt;百度&lt;/a&gt;
    &lt;a href='www.sougou.com'&gt;搜狗&lt;/a&gt;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=href=(['&quot;]))([\s\S]+?)\1</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token string">&quot;nice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 隐藏电话后四位</span>
<span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  电话1: 12345678901
  电话2: 98745675603
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=\d{7})\d+\s*</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
users <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1234567**** 9874567****</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    lightforestt123
    lightforestt...
    lightforestt
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z]+(?!\d)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span>
<span class="token comment">//贪婪匹配到a停止 因为n是最后一个不是数字的字符</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[&quot;xuchangfa&quot;, &quot;lightforesttnice&quot;, &quot;lightforestt&quot;]</span>

<span class="token comment">// 过滤违规字符 当输入框中输入的内容中包含任何违规字符 都会匹配失败</span>
<span class="token comment">// 限定开始位置以后都不准出现违禁字符</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?!.*(fuck|cnm|nmsl).*)[\s\S]*</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span>
<span class="token comment">// 同理，同样可以设置结束位置前不准出现违禁字符</span>
<span class="token keyword">let</span> reg2 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\s\S]*(?&lt;!.*(fuck|cnm|nmsl).*)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keyup&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend/javascript/promise_await_async/" class="prev">
        promise的前世今生
      </a></span> <span class="next"><a href="/frontend/javascript/base.html">
        js基础
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8a3e4be4.js" defer></script><script src="/assets/js/2.b1c453a7.js" defer></script><script src="/assets/js/33.77cf9e9a.js" defer></script>
  </body>
</html>
