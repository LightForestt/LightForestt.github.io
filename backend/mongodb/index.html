<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mongod |  Best Programming Language ？ 😈 JAVASCRIPT</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just learn and run">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.d0f45259.js" as="script"><link rel="preload" href="/assets/js/2.9e697bc4.js" as="script"><link rel="preload" href="/assets/js/8.6fffe5ac.js" as="script"><link rel="prefetch" href="/assets/js/10.48b8c953.js"><link rel="prefetch" href="/assets/js/11.f612be11.js"><link rel="prefetch" href="/assets/js/12.b835a644.js"><link rel="prefetch" href="/assets/js/13.be4ff992.js"><link rel="prefetch" href="/assets/js/14.bbd05573.js"><link rel="prefetch" href="/assets/js/15.1b4ee2f2.js"><link rel="prefetch" href="/assets/js/16.588a1728.js"><link rel="prefetch" href="/assets/js/17.ae68adab.js"><link rel="prefetch" href="/assets/js/18.68e9d6df.js"><link rel="prefetch" href="/assets/js/19.d2991acb.js"><link rel="prefetch" href="/assets/js/20.8fe6b2cd.js"><link rel="prefetch" href="/assets/js/21.12c5dbb4.js"><link rel="prefetch" href="/assets/js/22.ddd0487c.js"><link rel="prefetch" href="/assets/js/23.4cead595.js"><link rel="prefetch" href="/assets/js/24.0a65f294.js"><link rel="prefetch" href="/assets/js/25.0c8ed6b4.js"><link rel="prefetch" href="/assets/js/26.6591a69e.js"><link rel="prefetch" href="/assets/js/27.ff0fa1ef.js"><link rel="prefetch" href="/assets/js/28.858f8826.js"><link rel="prefetch" href="/assets/js/29.3f6b44e9.js"><link rel="prefetch" href="/assets/js/3.0b8b26d0.js"><link rel="prefetch" href="/assets/js/30.69cef0d1.js"><link rel="prefetch" href="/assets/js/31.576782ee.js"><link rel="prefetch" href="/assets/js/32.78085356.js"><link rel="prefetch" href="/assets/js/33.25cb7d39.js"><link rel="prefetch" href="/assets/js/34.d18511e2.js"><link rel="prefetch" href="/assets/js/35.6dc2bd90.js"><link rel="prefetch" href="/assets/js/36.b695c924.js"><link rel="prefetch" href="/assets/js/37.d803bac1.js"><link rel="prefetch" href="/assets/js/38.8abd0adb.js"><link rel="prefetch" href="/assets/js/39.3b23f090.js"><link rel="prefetch" href="/assets/js/4.e7c996f5.js"><link rel="prefetch" href="/assets/js/40.31a5553f.js"><link rel="prefetch" href="/assets/js/41.96f2dfc6.js"><link rel="prefetch" href="/assets/js/42.da2b78c0.js"><link rel="prefetch" href="/assets/js/43.2b80b114.js"><link rel="prefetch" href="/assets/js/44.03f54269.js"><link rel="prefetch" href="/assets/js/45.182bfe6b.js"><link rel="prefetch" href="/assets/js/46.cede0b20.js"><link rel="prefetch" href="/assets/js/47.869f0654.js"><link rel="prefetch" href="/assets/js/48.b8a8b538.js"><link rel="prefetch" href="/assets/js/49.d919b506.js"><link rel="prefetch" href="/assets/js/5.6eff8140.js"><link rel="prefetch" href="/assets/js/50.b754644d.js"><link rel="prefetch" href="/assets/js/51.a3cf1047.js"><link rel="prefetch" href="/assets/js/52.4ee6e441.js"><link rel="prefetch" href="/assets/js/6.17d5dd20.js"><link rel="prefetch" href="/assets/js/7.576da1bf.js"><link rel="prefetch" href="/assets/js/9.0041b96e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name"> Best Programming Language ？ 😈 JAVASCRIPT</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>frontend</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>javascript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/javascript/promise_await_async/" class="sidebar-link">promise的前世今生</a></li><li><a href="/frontend/javascript/regex.html" class="sidebar-link">正则表达式</a></li><li><a href="/frontend/javascript/base.html" class="sidebar-link">js基础</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>browser</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>typescript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>vuejs</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="mongod"><a href="#mongod" class="header-anchor">#</a> mongod</h2> <h3 id="安装配置"><a href="#安装配置" class="header-anchor">#</a> 安装配置</h3> <p>在<code>Mongodb</code>官网下载最新版本的<a href="https://cloud.mongodb.com/" target="_blank" rel="noopener noreferrer">Mongodb 下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>D:<span class="token punctuation">\</span>Program Files <span class="token punctuation">(</span>x86<span class="token punctuation">)</span><span class="token punctuation">\</span>MongoDB<span class="token punctuation">\</span>Server<span class="token punctuation">\</span><span class="token number">3.2</span><span class="token punctuation">\</span>bin
</code></pre></div><p>bin 文件夹下找到 mongod.exe 命令，然后通过管理员执行<code>mongod --dbpath x路径x</code>，路径可以是任何地方，我这里选择在 D 盘的 MongoDB 目录下，当然路径不要包含特殊的字符串，比如<code>Program Files (x86)</code>也不行</p> <div class="language-shell extra-class"><pre class="language-shell"><code>mongod --dbpath D:<span class="token punctuation">\</span>mongodb<span class="token punctuation">\</span>data<span class="token punctuation">\</span>db
</code></pre></div><p>经过上面的配置之后，就可以返回 bin 目录下找到<code>mongo.exe</code>命令，并管理员下执行，就可以出现 mongodb 的命令行模式</p> <h3 id="mongod-2"><a href="#mongod-2" class="header-anchor">#</a> mongod</h3> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//帮助</span>
db<span class="token punctuation">.</span><span class="token function">stats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//统计</span>
</code></pre></div><h3 id="显示数据库"><a href="#显示数据库" class="header-anchor">#</a> 显示数据库</h3> <div class="language-js extra-class"><pre class="language-js"><code>show dbs
</code></pre></div><p>检查当前选择的数据库</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">;</span>
</code></pre></div><h3 id="添加数据库"><a href="#添加数据库" class="header-anchor">#</a> 添加数据库</h3> <p><strong>数据库名</strong>为数据库创建的名字，使用该命令后会默认切换到对应的数据库，并且在数据库中添加选项，数据库信息才显示，如果默认就有该数据库，那就是切换到对应的数据库里面</p> <div class="language-js extra-class"><pre class="language-js"><code>use 数据库名
</code></pre></div><h3 id="删除数据库"><a href="#删除数据库" class="header-anchor">#</a> 删除数据库</h3> <p>先切换到对应的数据库，然后再执行<code>db.dropDatabase()</code>删除该数据库</p> <div class="language-js extra-class"><pre class="language-js"><code>use 数据库名
<span class="token comment">//switched to db 数据库名</span>
db<span class="token punctuation">.</span><span class="token function">dropDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="显示集合"><a href="#显示集合" class="header-anchor">#</a> 显示集合</h3> <p>用一下命令可以检查创建的集合</p> <div class="language-js extra-class"><pre class="language-js"><code>show collections
</code></pre></div><h3 id="添加集合"><a href="#添加集合" class="header-anchor">#</a> 添加集合</h3> <p>在创建完数据库之后，我们就可以创建集合</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">createCollection</span><span class="token punctuation">(</span>集合名字name，设置参数options<span class="token punctuation">[</span>对象类型<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>name</strong>是要创建的集合的名称。 <strong>options</strong>是一个文档，用于指定集合的配置</p> <p>参数 类型 描述
name String 要创建的集合的名称
options Document (可选)指定有关内存大小和索引的选项
<strong>options</strong>参数是可选的，因此只需要指定集合的名称。 以下是可以使用的选项列表：</p> <p>字段 类型 描述
capped Boolean (可选)如果为 true，则启用封闭的集合。上限集合是固定大小的集合，它在达到其最大大小时自动覆盖其最旧的条目。 如果指定 true，则还需要指定 size 参数。
autoIndexId Boolean (可选)如果为 true，则在_id 字段上自动创建索引。默认值为 false。
size 数字 (可选)指定上限集合的最大大小(以字节为单位)。 如果 capped 为 true，那么还需要指定此字段的值。
max 数字 (可选)指定上限集合中允许的最大文档数。
由于<strong>option</strong>是可选，我们也可以不带配置项创建集合</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">createCollection</span><span class="token punctuation">(</span><span class="token string">&quot;mycollection&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="删除集合"><a href="#删除集合" class="header-anchor">#</a> 删除集合</h3> <p><code>db.collection.drop()</code>用于从数据库中删除集合</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>集合名<span class="token punctuation">.</span><span class="token function">drop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>比如我们可以测试以下操作</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">createCollection</span><span class="token punctuation">(</span><span class="token string">&quot;lightforestt&quot;</span><span class="token punctuation">)</span><span class="token comment">//创建名为lightforestt的集合</span>
show collections<span class="token comment">//显示该数据库所有集合   lightforestt</span>
db<span class="token punctuation">.</span>lightforestt<span class="token punctuation">.</span><span class="token function">drop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//删除名为lightforestt的集合</span>
</code></pre></div><h3 id="查看文档"><a href="#查看文档" class="header-anchor">#</a> 查看文档</h3> <p>最简单查看文档的方法就是<code>find()</code>，会检索集合中所有的文档结果</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>集合名<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>要以格式化的方式显示结果，可以使用<code>pretty()</code>方法。</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>集合名<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_1-固值寻找"><a href="#_1-固值寻找" class="header-anchor">#</a> 1.固值寻找</h2> <p>寻找 age 集合里面所有含有属性值为 lightforestt 的文档结果，相当于<code>where name = 'lightforestt'</code></p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;lightforestt&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_2-范值寻找"><a href="#_2-范值寻找" class="header-anchor">#</a> 2.范值寻找</h2> <p>操作 语法 示例 等效语句
相等 {:} <code>db.age.find({&quot;name&quot;:&quot;lightforestt&quot;}).pretty()</code> where name = 'lightforestt'
小于 {:{$lt:}} <code>db.age.find({&quot;likes&quot;:{$lt:50}}).pretty()</code> where likes &lt; 50
小于等于 {:{$lte:}} <code>db.age.find({&quot;likes&quot;:{$lte:50}}).pretty()</code> where likes &lt;= 50
大于 {:{$gt:}} <code>db.age.find({&quot;likes&quot;:{$gt:50}}).pretty()</code> where likes 50
大于等于 {:{$gte:}} <code>db.age.find({&quot;likes&quot;:{$gte:50}}).pretty()</code> where likes = 50
不等于 {:{$ne:}} <code>db.age.find({&quot;likes&quot;:{$ne:50}}).pretty()</code> where likes != 50</p> <h2 id="_3-and-和-or-寻找"><a href="#_3-and-和-or-寻找" class="header-anchor">#</a> 3.AND 和 OR 寻找</h2> <h3 id="and"><a href="#and" class="header-anchor">#</a> AND</h3> <p>在 find()方法中，如果通过使用<code>，</code>将它们分开传递多个键，则 mongodb 将其视为<strong>AND</strong>条件。 以下是 AND 的基本语法</p> <p>寻找<code>_id</code>为 1 并且<code>name</code>为 lightforestt 的所有结果集</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  $and<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> _id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;lightforestt&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="or"><a href="#or" class="header-anchor">#</a> OR</h3> <p>在要根据 OR 条件查询文档，需要使用<code>$or</code>关键字。以下是 OR 条件的基本语法</p> <p>寻找<code>name</code>为 nnn 或者<code>name</code>为 lightforestt 的所有结果集</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
   <span class="token punctuation">{</span>
      $or<span class="token operator">:</span> <span class="token punctuation">[</span>
         <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nnn&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>“name“<span class="token operator">:</span> <span class="token string">&quot;lightforestt&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="and-和-or-等结合"><a href="#and-和-or-等结合" class="header-anchor">#</a> AND 和 OR 等结合</h3> <p>相当于语句<code>where title = &quot;lightforestt&quot; OR ( title = &quot;nnn&quot; AND _id &lt; 5)</code></p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  $or<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&quot;lightforestt&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      $and<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          title<span class="token operator">:</span> <span class="token string">&quot;nnn&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          _id<span class="token operator">:</span> <span class="token punctuation">{</span>
            $lte<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="插入文档"><a href="#插入文档" class="header-anchor">#</a> 插入文档</h3> <p>文档的数据结构和 JSON 基本一样。
所有存储在集合中的数据都是 BSON 格式。
BSON 是一种类 json 的一种二进制形式的存储格式,简称<strong>Binary JSON</strong>。</p> <p>要将数据插入到 mongodb 集合中，需要使用 mongodb 的<code>insert()</code>或<code>save()</code>方法。</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>集合名<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>比如我们可以插入以下数据</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>lightforestt<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  _id<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  title<span class="token operator">:</span> <span class="token string">&quot;MongoDB Tutorials&quot;</span><span class="token punctuation">,</span>
  description<span class="token operator">:</span> <span class="token string">&quot;node_tutorials&quot;</span><span class="token punctuation">,</span>
  by<span class="token operator">:</span> <span class="token string">&quot;Oaoafly&quot;</span><span class="token punctuation">,</span>
  url<span class="token operator">:</span> <span class="token string">&quot;https://github.com/lightforestt/node-tutorial&quot;</span><span class="token punctuation">,</span>
  tags<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;wscat&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MongoDB&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;database&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;NoSQL&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  num<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>也可以支持插入多个，注意传入的是数组形式</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>lightforestt<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
   _id<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
   title<span class="token operator">:</span> ‘Hello’
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
   _id<span class="token operator">:</span> <span class="token number">101</span><span class="token punctuation">,</span>
   title<span class="token operator">:</span> ‘World’
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>在插入的文档中，如果不指定_id 参数，那么 mongodb 会为此文档分配一个唯一的 ObjectId
要插入文档，也可以使用<code>db.post.save(document)</code>。如果不在文档中指定_id，那么<code>save()</code>方法将与<code>insert()</code>方法一样自动分配 ID 的值。如果指定_id，则将以 save()方法的形式替换包含**_id**的文档的全部数据。</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>lightforestt<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  _id<span class="token operator">:</span> <span class="token number">111</span><span class="token punctuation">,</span>
  title<span class="token operator">:</span> <span class="token string">&quot;Oaoafly lightforestt&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="更新文档"><a href="#更新文档" class="header-anchor">#</a> 更新文档</h3> <h2 id="_1-update-方法"><a href="#_1-update-方法" class="header-anchor">#</a> 1.update()方法</h2> <p>寻找第一条 title 为 lightforestt 的值，并且更新值 title 为 nnn 和 age 为 12</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&quot;lightforestt&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    $set<span class="token operator">:</span> <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&quot;nnn&quot;</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>默认情况下，mongodb 只会更新一个文档。要更新多个文档，需要将参数<code>multi</code>设置为 true，还可以配合 find 方法里面的各种复杂条件判断来筛选结果，然后更新多个文档</p> <p>寻找所有 title 为 lightforestt 的值，并且更新值 title 为 nnn 和 age 为 12</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">&quot;lightforestt&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    $set<span class="token operator">:</span> <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&quot;nnn&quot;</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    multi<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_2-save-方法"><a href="#_2-save-方法" class="header-anchor">#</a> 2.save()方法</h2> <p>将<code>_id</code>主键为 3 的文档，覆盖新的值，注意<code>_id</code>为必传</p> <div class="language- extra-class"><pre class="language-text"><code>db.age.save({
  '_id':3,
  'title': 'lightforestt'
})
</code></pre></div><h3 id="删除文档"><a href="#删除文档" class="header-anchor">#</a> 删除文档</h3> <p>删除主键<code>_id</code>为 3 的文档，默认是删除多条</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  _id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>建议在执行<code>remove()</code>函数前先执行<code>find()</code>命令来判断执行的条件是否正确</p> <p>如果你只想删除第一条找到的记录可以设置<strong>justOne</strong>为 1，如下所示</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><p>全部删除</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="limit-与-skip-方法"><a href="#limit-与-skip-方法" class="header-anchor">#</a> Limit 与 Skip 方法</h3> <h2 id="limit"><a href="#limit" class="header-anchor">#</a> Limit</h2> <p>如果你需要在 mongodb 中读取指定数量的数据记录，可以使用 mongodb 的 Limit 方法，<code>limit()</code>方法接受一个数字参数，该参数指定从 mongodb 中读取的记录条数。</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>数量<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="skip"><a href="#skip" class="header-anchor">#</a> Skip</h2> <p>我们除了可以使用<code>limit()</code>方法来读取指定数量的数据外，还可以使用<code>skip()</code>方法来跳过指定数量的数据，skip 方法同样接受一个数字参数作为跳过的记录条数。</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>age
  <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>数量<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>数量<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//skip()方法默认值为0</span>
</code></pre></div><p>所以我们在实现分页的时候就可以用 limit 来限制每页多少条数据(一般固定一个值)，用 skip 来决定显示第几页(一个有规律变动的值)</p> <h3 id="排序"><a href="#排序" class="header-anchor">#</a> 排序</h3> <p>在 mongodb 中使用使用<code>sort()</code>方法对数据进行排序，<code>sort()</code>方法可以通过参数指定排序的字段，并使用 1 和-1 来指定排序的方式，其中 1 为升序排列，而-1 是用于降序排列。</p> <p>1 升序排列
-1 降序排列</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>集合名<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token function">键值</span><span class="token punctuation">(</span>属性值<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>把<code>age</code>集合表重新根据<code>_id</code>主键进行降序排列</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  _id<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="node-js-连接"><a href="#node-js-连接" class="header-anchor">#</a> Node.js 连接</h3> <p>安装 mongodb 的模块</p> <div class="language-js extra-class"><pre class="language-js"><code>npm install mongodb
</code></pre></div><h2 id="javascript-操纵-mongodb"><a href="#javascript-操纵-mongodb" class="header-anchor">#</a> javascript 操纵 mongodb</h2> <h2 id="_1-连接数据库"><a href="#_1-连接数据库" class="header-anchor">#</a> 1.连接数据库</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> MongoClient <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>
<span class="token comment">//结尾是选择数据库名</span>
<span class="token keyword">let</span> <span class="token constant">DB_CONN_STR</span> <span class="token operator">=</span> <span class="token string">&quot;mongodb://localhost:27017/lightforestt&quot;</span><span class="token punctuation">;</span>
MongoClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token constant">DB_CONN_STR</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> db</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_2-查询数据"><a href="#_2-查询数据" class="header-anchor">#</a> 2.查询数据</h2> <p>注意查询回来的结果需要 toArray 来遍历处理</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> MongoClient <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token constant">DB_CONN_STR</span> <span class="token operator">=</span> <span class="token string">&quot;mongodb://localhost:27017/lightforestt&quot;</span><span class="token punctuation">;</span>

MongoClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token constant">DB_CONN_STR</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> db</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//选中age集合，并用find方法把结果集拿回来进行处理</span>
  db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">&quot;cba&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Error:&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>经过测试，读取大于 100 条的时候会出现报错<a href="https://docs.mongodb.com/manual/tutorial/iterate-a-cursor/#cursor-batches" target="_blank" rel="noopener noreferrer">官网解释<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，可以尝试用<code>forEach</code>代替</p> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;pokemon&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="查询-id"><a href="#查询-id" class="header-anchor">#</a> 查询 ID</h3> <p>查询自动生成的<code>ObjectId</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> ObjectId <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ObjectId<span class="token punctuation">;</span>
<span class="token keyword">let</span> _id <span class="token operator">=</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5bcae50ed1f2c2f5e4e1a76a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    _id<span class="token operator">:</span> _id<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_3-插入数据"><a href="#_3-插入数据" class="header-anchor">#</a> 3.插入数据</h2> <p>insert 函数第一个参数是需要插入的值(可以一个也可以多个)，第二个参数是接受一个回调函数，当值插入成功后回返回插入值得一些关键信息，比如<code>_id</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> MongoClient <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token constant">DB_CONN_STR</span> <span class="token operator">=</span> <span class="token string">&quot;mongodb://localhost:27017/lightforestt&quot;</span><span class="token punctuation">;</span>

MongoClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token constant">DB_CONN_STR</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> db</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;插入的值A&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;插入的值B&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Error:&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_4-更新数据"><a href="#_4-更新数据" class="header-anchor">#</a> 4.更新数据</h2> <p>注意如果不加$set就是完全替换原来的那份(没有设置的属性值将会丢失)，加上$set 则只是更新对应的属性值，其余不做改变</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> MongoClient <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token constant">DB_CONN_STR</span> <span class="token operator">=</span> <span class="token string">&quot;mongodb://localhost:27017/lightforestt&quot;</span><span class="token punctuation">;</span>

MongoClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token constant">DB_CONN_STR</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> db</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      _id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      $set<span class="token operator">:</span> <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;你好，世界&quot;</span><span class="token punctuation">,</span>
        skill<span class="token operator">:</span> <span class="token string">&quot;js&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Error:&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_5-删除数据"><a href="#_5-删除数据" class="header-anchor">#</a> 5.删除数据</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> MongoClient <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token constant">DB_CONN_STR</span> <span class="token operator">=</span> <span class="token string">&quot;mongodb://localhost:27017/lightforestt&quot;</span><span class="token punctuation">;</span>

MongoClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token constant">DB_CONN_STR</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> db</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      _id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Error:&quot;</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">//关闭数据库</span>
      db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_6-关闭数据库"><a href="#_6-关闭数据库" class="header-anchor">#</a> 6.关闭数据库</h2> <div class="language-js extra-class"><pre class="language-js"><code>db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d0f45259.js" defer></script><script src="/assets/js/2.9e697bc4.js" defer></script><script src="/assets/js/8.6fffe5ac.js" defer></script>
  </body>
</html>
