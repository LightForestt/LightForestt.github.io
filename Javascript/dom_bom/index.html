<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DOM 文档对象模型 |  Best Programming Language ？ 😈 JAVASCRIPT</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just learn and run">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.2b158257.js" as="script"><link rel="preload" href="/assets/js/2.52bd5051.js" as="script"><link rel="preload" href="/assets/js/9.cb0205bc.js" as="script"><link rel="prefetch" href="/assets/js/10.4246e6a6.js"><link rel="prefetch" href="/assets/js/11.d23225d7.js"><link rel="prefetch" href="/assets/js/12.cc7d5924.js"><link rel="prefetch" href="/assets/js/13.723985c8.js"><link rel="prefetch" href="/assets/js/14.4398ba7b.js"><link rel="prefetch" href="/assets/js/3.b8d59c98.js"><link rel="prefetch" href="/assets/js/4.e7c996f5.js"><link rel="prefetch" href="/assets/js/5.6eff8140.js"><link rel="prefetch" href="/assets/js/6.17d5dd20.js"><link rel="prefetch" href="/assets/js/7.9f0234f0.js"><link rel="prefetch" href="/assets/js/8.cdf20a2e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name"> Best Programming Language ？ 😈 JAVASCRIPT</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Javascript/vuejs/" class="nav-link">
  vuejs
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/reactjs/" class="nav-link">
  reactjs
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/dom_bom/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  dom/bom
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/nodejs/" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/tools/" class="nav-link">
  tools
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/promise_await/" class="nav-link">
  promise/await
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Javascript/vuejs/" class="nav-link">
  vuejs
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/reactjs/" class="nav-link">
  reactjs
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/dom_bom/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  dom/bom
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/nodejs/" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/tools/" class="nav-link">
  tools
</a></li><li class="dropdown-item"><!----> <a href="/Javascript/promise_await/" class="nav-link">
  promise/await
</a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="dom-文档对象模型"><a href="#dom-文档对象模型" class="header-anchor">#</a> DOM 文档对象模型</h2> <ul><li>dom 中顶级对象是<code>document</code>主要是用来操作文档，节点，属性，文本。</li></ul> <h4 id="_1-获取元素"><a href="#_1-获取元素" class="header-anchor">#</a> 1.获取元素</h4> <ul><li><code>getElementById()</code> 按照id取元素。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dom'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>getElementsByTagName</code>按照标签名选出当前元素包含的子元素。注意：返回值是一个类数组<code>HTMLCollection</code>，即使找不到元素，也是返回一个长度的类数组（<code>length</code>为<code>0</code>）。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 选出document中的div</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 选出#dom 下的div</span>
<span class="token keyword">let</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'dom'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>document.getElementsByClassName</code> H5新增方法 IE9以下不可用</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>document.querySelector</code>选择第一个匹配的元素对象 ，H5新增方法 IE9以下不可用</li> <li><code>document.querySelectorAll</code>选择所有匹配的元素对象,返回类数组<code>NodeList</code>，H5新增方法 &gt;IE8 可用</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#dom'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>获取特殊元素 <code>body html</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">let</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
    <span class="token keyword">let</span> html <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
</code></pre></div><h4 id="_2-事件"><a href="#_2-事件" class="header-anchor">#</a> 2.事件</h4> <ul><li>事件三要素
<ol><li>事件源</li> <li>事件类型</li> <li>事件处理方式</li></ol></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 注册事件 只能注册一个方法</span>
box<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// dosomething</span>
<span class="token punctuation">}</span>
<span class="token comment">// 通过事件监听可以设置多个监听方法 (IE9之前不支持)</span>
box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// dosomething</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 兼容IE9之前的写法</span>
box<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// dosomething</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 解绑事件 </span>
 box<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token comment">// 当去监听器时，就需要传入需要删除的方法，这么做的前提是设置监听方法的时候不能传入匿名方法，如下</span>
<span class="token keyword">function</span> <span class="token function">clickMethod</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//dosomething</span>
<span class="token punctuation">}</span>
box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> clickMethod<span class="token punctuation">)</span>
box<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> clickMethod<span class="token punctuation">)</span>
</code></pre></div><ul><li>事件流
<ul><li>捕获阶段，从外向内传播事件，<code>document-&gt;html-&gt;body-&gt;div</code></li> <li>冒泡阶段，从内向外传播事件，<code>div-&gt;body-&gt;html-&gt;document</code></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 传统注册的方法只能在冒泡阶段触发</span>
 div<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// attachEvent IE9以下只能冒泡阶段触发</span>
 div<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token comment">//dosomething</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// addEventListener可以通过添加第三个参数来指定当前方法是在捕获阶段还是在冒泡阶段触发</span>
div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//dosomething</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>事件触发顺序为，从外至内执行捕获的事件，然后从内之外执行冒泡的事件。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> inner <span class="token operator">=</span> box<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> son <span class="token operator">=</span> inner<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
inner<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span>
son<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span>

</code></pre></div><ul><li>事件对象 <code>event</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>div<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 兼容IE678</span>
    e <span class="token operator">=</span> e <span class="token operator">||</span> window<span class="token punctuation">.</span>event
<span class="token punctuation">}</span>

div<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// IE678 不支持</span>
    e
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>e.target</code> 和 <code>this</code> 的区别
<ul><li><code>e.target</code> 返回的是触发事件的对象</li> <li><code>this</code> 返回的是绑定事件的对象</li> <li>当一个事件触发，不一定是绑定他的元素触发的事件，也可能是当前元素的子元素触发的当前事件。</li></ul></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inner<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>son<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            content
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> inner <span class="token operator">=</span> box<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> son <span class="token operator">=</span> inner<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

<span class="token comment">// 点击content文字触发方法</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// box</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token comment">// son</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>srcElement<span class="token punctuation">)</span><span class="token comment">// IE678</span>
<span class="token punctuation">}</span>
box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
</code></pre></div><ul><li><p>常用事件属性和方法</p> <ul><li><code>e.type</code> 方法类型,不带<code>on</code></li> <li><code>e.preventDefault()</code> 阻止默认行为 IE678不支持</li> <li><code>e.stopPropagation()</code> 阻止冒泡</li> <li><code>e.cancelBubble = true</code> IE678阻止毛泡</li></ul></li> <li><p>事件委托/代理/委派</p></li></ul> <blockquote><ul><li>如下代码。想要为每个<code>li</code>创建同一个点击方法，按照常规方法应该为每个<code>li</code>添加监听,这样会浪费很多的性能去添加监听器。如果利用冒泡机制，使用事件委托的方式，给<code>ul</code>添加监听器，这样就通过<code>li</code>的冒泡触发了<code>ul</code>的监听器。如果想要获取具体点击了哪个<code>li</code>可以通过<code>e.target</code>去获取。</li></ul></blockquote> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 点击li 冒泡会触发ul的监听器--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>002<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>003<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>004<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>005<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span>
ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'red'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><ul><li>常用鼠标事件
<ul><li><code>onlick</code> 点击</li> <li><code>onmouseenter</code>经过自身盒子触发，不会冒泡</li> <li><code>onmouseover</code>鼠标经过自身或者子盒子触发，会冒泡</li> <li><code>onmouserleave</code> 鼠标离开 不会冒泡 和<code>onmouseenter</code> 对应</li> <li><code>onmouseup</code> 鼠标弹起触发</li> <li><code>onmouseout</code> 鼠标离开触发</li> <li><code>onmousedown</code> 鼠标按下触发</li> <li><code>onmousemove</code> 鼠标移动触发</li> <li><code>onfocus</code> 获得鼠标焦点</li> <li><code>onblur</code> 失去鼠标焦点</li> <li><code>contextmenu</code> 控制显示上下文菜单 主要用来取消默认的上下文菜单</li> <li><code>selectstart</code> 开始选中内容时候触发</li> <li><code>element.click()</code> 当前元素执行一次点击事件 会冒泡</li> <li><code>element.focus()</code> 获取焦点</li> <li><code>element.blur()</code> 失去焦点</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 阻止弹出右键菜单</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'contextmenu'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 阻止选中行为</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'selectstart'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>鼠标事件对象 <code>MouseEvent</code> <ul><li><code>e.clientX</code> 鼠标相对视口的X坐标</li> <li><code>e.clientY</code> 鼠标相对于视口的Y坐标</li> <li><code>e.screenX</code> 鼠标相对屏幕的X坐标</li> <li><code>e.screenY</code> 鼠标相对屏幕的Y坐标</li> <li><code>e.pageX</code> 鼠标相对于整个文档页面的X坐标 <em>IE9以下不支持</em></li> <li><code>e.pageY</code> 鼠标相对于整个文档页面的Y坐标 <em>IE9以下不支持</em></li> <li></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token string">'px'</span>
   div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY <span class="token operator">+</span> <span class="token string">'px'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>常用键盘事件
<ul><li><code>onkeyup</code> 键盘弹起触发</li> <li><code>onkeydown</code> 键盘按下触发 一直按着一直触发</li> <li><code>onkeypress</code>键盘按下触发，但是功能按键不会触发这个方法 一直按着一直触发</li> <li>如果三者都有 执行顺序是<code>down -&gt; press -&gt; up</code></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keypress'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
</code></pre></div><ul><li>键盘事件对象 <code>KeyBoardEvent</code> <ul><li><code>keyCode</code> 按键对应的 ASCII 码 大小写字母是一样的，但是按下和弹起的ASCII码是不一样的</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> search <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.search'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> search <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.search'</span><span class="token punctuation">)</span>

        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">83</span> <span class="token operator">&amp;&amp;</span> search<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">const</span> search <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.search'</span><span class="token punctuation">)</span>

        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">83</span> <span class="token operator">&amp;&amp;</span> search<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">83</span> <span class="token operator">&amp;&amp;</span> search<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><p>移动端事件</p> <ul><li><code>touchstart</code> 开始触摸</li> <li><code>touchend</code>  结束触摸</li> <li><code>touchmove</code> 触摸+移动</li></ul></li> <li><p>移动端事件对象 <code>TouchEvent</code> 用于描述一个或者多个触点。</p> <ul><li><code>e.touches</code> 所有触点的列表。</li> <li><code>e.targetTouches</code> 当前Dom元素上的触点列表，最常使用，重点使用。</li> <li><code>e.changedTouches</code> 触点状态变化列表，从无到有或者从有到无，手指离开屏幕的时候可以通过此属性获取触点信息。以上两个都为空。</li> <li><code>e.targetTouches[0]</code> 获取第一个触点，其中包含位置信息。</li></ul></li> <li><p>过渡事件 使用<code>transition</code>的元素拥有该事件</p> <ul><li><code>transitionend</code>过渡结束时触发过渡在完成前被移除或者<code>display:none</code>的时候不会触发方法</li> <li><code>transitionrun</code>该事件在首次生成CSS过渡时（即<code>transition-delay</code>开始之前）触发。包含延迟时间。</li> <li><code>transitionstart</code>当CSS过渡实际开始时（即<code>transition-delay</code>结束后），将触发此事件，动画实际开始时候触发，不包含延迟时间 。</li> <li><code>transitioncancel</code>动画被取消时触发，<code>display:none</code>触发，过渡被终止时候触发，比如设置鼠标悬浮时候触发某个动画，在动画完成之前移出鼠标，触发该事件，当正在过渡的属性被改变时触发。</li></ul></li></ul> <h4 id="_3-修改元素"><a href="#_3-修改元素" class="header-anchor">#</a> 3.修改元素</h4> <ul><li><code>innerText</code> <ul><li>渲染不解析标签。该属性是可读可写的。读取出内容会去除空格和换行。</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>box<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span>
box<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    box<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'&lt;div&gt;123&lt;/div&gt;'</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>innerHTML</code> <ul><li>渲染并解析标签。该属性是可读可写的。读取的内容保留空格和换行。</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>box<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span>
box<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    box<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'&lt;div&gt;123&lt;/div&gt;'</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>读写元素属性，可以直接用<code>标签对象.属性</code>来读写，只能获取内置属性，可以用方法来读写，优势是可以获取自定义属</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 读</span>
element<span class="token punctuation">.</span>attr
element<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'my-attr'</span><span class="token punctuation">)</span>
<span class="token comment">// H5获取自定义属性</span>
element<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>attr
element<span class="token punctuation">.</span>dataset<span class="token punctuation">[</span><span class="token string">'attr'</span><span class="token punctuation">]</span>
<span class="token comment">// 多个短横需要采用驼峰通过dataset获取属性</span>
element<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>someAttr


<span class="token comment">// 写</span>
<span class="token comment">// H5规范如果是自定义属性加上 data- 前缀</span>
element<span class="token punctuation">.</span>attr <span class="token operator">=</span> <span class="token string">'attr'</span>
element<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-attr'</span><span class="token punctuation">,</span><span class="token string">'value'</span><span class="token punctuation">)</span>

<span class="token comment">// 移除属性</span>
element<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'data-attr'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>element.style</code> 修改行内样式，驼峰写法。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> ls <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>ls<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>
    ls<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>backgroundPosition <span class="token operator">=</span> <span class="token string">'0 -'</span> <span class="token operator">+</span> index <span class="token operator">+</span> <span class="token string">'px'</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>element.classList</code>操作样式类。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 如果有就删除 没有就添加box属性</span>
box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span>
box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span>
box<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>element.className</code>直接指定类，会去除原来的类。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> ls <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span>
ls<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_4-节点操作"><a href="#_4-节点操作" class="header-anchor">#</a> 4.节点操作</h4> <ul><li><p>利用节点层级关系获取元素，比dom查询更方便。
页面中所有内容都是节点。所有节点都可以通过js访问，均可被修改、删除、新增。</p></li> <li><p>节点属性</p> <ul><li>节点类型 nodeType
<ul><li>元素节点 - 1</li> <li>属性节点 - 2</li> <li>文本节点 - 3 （包含文字 空格 换行）</li></ul></li> <li>节点名称 nodeName</li> <li>节点值 nodeValue</li></ul></li> <li><p>获取节点</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取离元素最近的父级节点</span>
box<span class="token punctuation">.</span>parentNode
<span class="token comment">// 包含文本节点和元素节点，但不包含属性节点 </span>
box<span class="token punctuation">.</span>childNodes
<span class="token comment">// 仅包含子元素节点</span>
box<span class="token punctuation">.</span>children

<span class="token comment">// 获取子级首尾节点，会取到文本节点</span>
box<span class="token punctuation">.</span>firstChild
box<span class="token punctuation">.</span>lastChild

<span class="token comment">// 获取子级首尾元素节点  IE9以上</span>
box<span class="token punctuation">.</span>lastElementChild
box<span class="token punctuation">.</span>firstElementChild

<span class="token comment">// 实际开发中使用children达到获取子级首尾元素的效果</span>
box<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> 
box<span class="token punctuation">.</span>children<span class="token punctuation">[</span>box<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>

<span class="token comment">// 获取兄弟节点 包括文本节点</span>
box<span class="token punctuation">.</span>nextSibling
box<span class="token punctuation">.</span>previousSibling

<span class="token comment">//  获取兄弟元素节点 不兼容IE9以下 需要自行添加polyfill</span>
box<span class="token punctuation">.</span>nextElementSibling
box<span class="token punctuation">.</span>previousElementSibling
</code></pre></div><ul><li>创建节点和添加节点</li> <li>使用先创建后添加的方式。原因是如果使用<code>innerHTML</code>性能差很多,因为传入字符串还需要浪费资源去解析。如果拼接完毕后一次写入，放弃循环，<code>innerHTML</code>性能会有提升。 多方案比较参见网站。<a href="https://jsperf.com/appendchild-vs-documentfragment-vs-innerhtml/61" target="_blank" rel="noopener noreferrer">查看性能对比<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建节点 </span>
<span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
div<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'123'</span>

<span class="token comment">// 添加节点</span>
<span class="token comment">// 首先获取父级节点</span>
<span class="token keyword">let</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span>

<span class="token comment">// 在父元素的子节点列表的末尾添加节点  如果重复操作同一个元素 会将前边的该元素删除 </span>
box<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span> 

<span class="token comment">// 在某个节点前添加节点</span>
<span class="token comment">// `insertBefore(插入的节点，参照的节点)`</span>
box<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span>box<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
       
<span class="token comment">// 删除某个子节点</span>
box<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>box<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 拷贝节点，参数为是否进行深拷贝，即是否克隆所有子节点</span>
<span class="token comment">// 浅拷贝时也会将属性节点拷贝过来</span>
box<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="bom-浏览器对象模型"><a href="#bom-浏览器对象模型" class="header-anchor">#</a> BOM 浏览器对象模型</h2> <ul><li>bom 中顶级对象是<code>window</code>，bom主要是和浏览器打交道，完成跳转，滚动窗口，调整窗口大小，浏览器事件等等。dom是包含在bom中的，<code>window.document</code></li></ul> <h4 id="_1-window-对象"><a href="#_1-window-对象" class="header-anchor">#</a> 1.<code>window</code> 对象</h4> <ul><li><p><code>window</code> 对象，是js访问浏览器窗口的一个接口，是一个全局对象，定义在全局作用于中的各变量都会变成<code>window</code>的属性或者方法。</p> <ul><li>注意：<code>window.name</code>本身是有值的，不要通过<code>var name = 'something'</code> 不要重新赋值。</li></ul></li> <li><p><code>window.noload</code>或者<code>window.addEventListener('load',e=&gt;{})</code>当文档内容全部加载完成之后执行方法，需要等待所有图片，flash，css等等加载完执行。</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 好处是多个监听不会互相覆盖 </span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><ul><li><code>window.addEventListener('DOMContentLoaded',e=&gt;{})</code> DOM加载完毕执行，不包含图片，flash，css等就可以执行。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 文档内容(标签)加载完就会执行</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>window.onresize</code>或者<code>window.addEventListener('resize',function(){})</code>浏览器窗口变化时触发方法。</li> <li><code>window.innerWidth</code>屏幕的尺寸，配合onersize可以进行部分响应式操作。</li> <li><code>window.setTimeout(fn,delay)</code>执行一次，返回一个定时器编号。</li> <li><code>window.clearInterval(n)</code>清除定时器</li> <li><code>window.setInterval(fn,delay)</code>无限执行，返回一个定时器编号。</li> <li><code>window.clearInterval(n)</code>清除定时器</li> <li><code>this</code>指向 略。</li> <li><code>window.onload</code>在火狐浏览器下会有问题，原因是火狐浏览器是将上一页的内容缓存进内存中，再返回上个页面的时候不会触发该事件</li> <li><code>window.pageshow</code>为了兼容上述火狐浏览器的问题，只要是页面展示就会触发这个方法</li></ul> <h4 id="_2-js在浏览器中的运行机制-event-loop-不适用node-请务必分清"><a href="#_2-js在浏览器中的运行机制-event-loop-不适用node-请务必分清" class="header-anchor">#</a> 2. js在浏览器中的运行机制 <code>event loop</code>(不适用node，请务必分清)</h4> <ul><li>宏任务和微任务：普通任务队列和延迟队列中的任务，都属于宏任务，对于每个宏任务而言，其内部都有一个微任务队列,其实引入微任务的初衷是为了解决异步回调的问题。</li> <li>V8引擎对于微任务的优化如下：在每一个宏任务中定义一个微任务队列，当该宏任务执行完成，会检查其中的微任务队列，如果为空则直接执行下一个宏任务，如果不为空，则依次执行微任务，执行完成才去执行下一个宏任务。</li> <li>常见的微任务有<code>Promise.then</code>(或<code>.reject</code>) 以及以<code>Promise</code>为基础开发的其他技术(比如<code>fetch API</code>), 还包括V8的垃圾回收过程。</li> <li>详述js代码运行机制
<ol><li>一开始整段脚本作为第一个宏任务执行,执行过程中同步代码直接执行，宏任务进入宏任务队列，微任务进入微任务队列，当前宏任务执行完出队。</li> <li>检查执行微任务队列，如果有则依次执行，直到微任务队列为空</li> <li>检查执行浏览器UI线程的渲染工作</li> <li>检查执行是否有WebWorker（自行百度）任务</li> <li>执行队首新的宏任务，循环往复，直到宏任务和微任务队列都为空</li></ol></li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span>rej</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'start_1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">res</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Promise1'</span><span class="token punctuation">)</span>
     <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout2'</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout1'</span><span class="token punctuation">)</span>
     Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Promise2'</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'start_2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">//执行结果：start_1 start_2 promise1 setTimeout1 Promise2 setTimeout2</span>
</code></pre></div><h4 id="_3-window-location对象"><a href="#_3-window-location对象" class="header-anchor">#</a> 3.<code>window.location</code>对象</h4> <ul><li><code>location.href</code>整个url（可以用来实现当前页面跳转，不开启新页签）</li> <li><code>location.host</code> 主机/域名</li> <li><code>location.port</code> 端口</li> <li><code>location.pathname</code> 路径</li> <li><code>location.search</code> 参数（带<code>?</code>）</li> <li><code>location.hash</code> #后边值</li> <li><code>location.assign(url)</code>跳转指定页面，可以记录浏览历史，可以后退。</li> <li><code>location.replace(url)</code>跳转，不记录历史，不可后退</li> <li><code>location.reload(boolean)</code>刷新页面,如果需要清除缓存传入布尔值<code>true</code>(强制刷新)</li></ul> <h4 id="_4-window-navigator对象"><a href="#_4-window-navigator对象" class="header-anchor">#</a> 4.<code>window.navigator</code>对象</h4> <ul><li><code>navigator.userAgent</code> 客户端信息</li></ul> <h4 id="_5-window-history-对象"><a href="#_5-window-history-对象" class="header-anchor">#</a> 5.<code>window.history</code> 对象</h4> <ul><li><code>history.back()</code> 后退1</li> <li><code>history.forward()</code> 前进1</li> <li><code>history.go(number)</code> 前进或者后退n</li></ul> <h4 id="_6-offset-元素偏移量"><a href="#_6-offset-元素偏移量" class="header-anchor">#</a> 6. <code>offset</code> 元素偏移量</h4> <ul><li><code>el.offsetParent</code> 返回当前父级定位元素（非<code>static</code>元素），逐级寻找，如果没有就返回<code>&lt;body&gt;</code></li> <li><code>el.offsetTop</code> 元素相对<code>offsetParent</code>元素上方的偏移量</li> <li><code>el.offsetLeft</code> 元素相对<code>offsetParent</code>元素左侧的偏移量</li> <li><code>el.offsetWidth</code> 返回自身包括<code>padding、border、content</code>的宽度，返回值不带单位</li> <li><code>el.offsetHeight</code> 返回自身包括<code>padding、border、content</code>的高度，返回值不带单位</li> <li><code>offset</code>和<code>style</code>区别(两种方式都可以获取宽高)
<ul><li><code>offset</code>可以获取内联样式也能获取外部link或者style中的样式，获取到的样式数据是没有单位的，包含<code>padding和border</code>，<strong>只读</strong></li> <li><code>style</code>只能获取内联样式中的数值，不能获取<code>&lt;style&gt;</code>标签中的样式，获取到的内联样式数据是带单位的，如<code>50px</code>，不包含<code>padding和border</code>，<strong>可读写</strong></li> <li>总结：取值用<code>offset</code>，改值用<code>style</code></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span>

box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>pageY<span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>pageX<span class="token operator">-</span><span class="token keyword">this</span><span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h4 id="_7-client-元素可视区相关属性"><a href="#_7-client-元素可视区相关属性" class="header-anchor">#</a> 7.<code>client</code> 元素可视区相关属性</h4> <blockquote><p>在响应式布局的时候时常需要判断当前视口的参数来决定当前页面的文字大小和一些样式，这就用到了以下属性，另外需要注意和<code>offset</code>系列的区别。</p></blockquote> <ul><li><code>element.clientTop</code> 返回元素上边框大小</li> <li><code>element.clientLeft</code> 返回元素左边框大小</li> <li><code>element.clientWidth</code> 返回自身包括<code>padding、centent</code>的宽度，不包含边框，返回值不带单位,和<code>offsetWidth</code>最大区别是不带边框。</li> <li><code>element.clientHeight</code> 返回自身包括<code>padding、centent</code>的高度，不包含边框，返回值不带单位，和<code>offsetHeight</code>最大区别是不带边框。</li></ul> <h4 id="_8-scroll-滚动区域相关属性"><a href="#_8-scroll-滚动区域相关属性" class="header-anchor">#</a> 8.<code>scroll</code> 滚动区域相关属性</h4> <ul><li><code>element.scrollTop</code> 被滚动到上边的长度  (滚动距离)</li> <li><code>element.scrollLeft</code> 被滚动到左边的长度 (滚动距离)</li> <li><code>element.scrollWidth</code> 返回自身实际宽度 不含边框</li> <li><code>element.scrollHeight</code>返回自身实际高度，不含边框，即使超过了当前元素区域，也会计算超出的长度。而<code>clientHeight</code>是不同的，<code>clientHeight</code>不会计算超出的区域。</li> <li><code>element.onsrcoll</code> 元素滚动时候触发</li> <li><code>window.pageYOffset</code>如果当前页面是可以滚动的，这个参数代表窗口的滚动距离。</li> <li>简单对比三大系列</li></ul> <table><thead><tr><th>offset</th> <th>client</th> <th>scroll</th></tr></thead> <tbody><tr><td><code>border、padding、content</code>，会计算滚动条的宽度，不计算视区之外的内容，会把边框计算在内</td> <td><code>padding、content</code>，，不会计算滚动条的宽度，只计算能看见的内容和内边距</td> <td><code>content、padding</code>、滚动出视区的内容也会计算在内</td></tr></tbody></table> <ul><li>案例：简易轮播图</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> target<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">_animate</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> target <span class="token operator">-</span> ele<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">_animate</span><span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> long<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ele<span class="token punctuation">.</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">let</span> init <span class="token operator">=</span> ele<span class="token punctuation">.</span>offsetLeft
    ele<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> step <span class="token operator">=</span> long <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>long <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>long <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ele<span class="token punctuation">.</span>offsetLeft <span class="token operator">-</span> init <span class="token operator">===</span> long<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clearInterval</span><span class="token punctuation">(</span>ele<span class="token punctuation">.</span>timer<span class="token punctuation">)</span>
            ele<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token keyword">null</span>
            <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        ele<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> ele<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> step <span class="token operator">+</span> <span class="token string">'px'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> slideLeft <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.left'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> slideRight <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.right'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> wrapper <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.wrapper'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.pic'</span><span class="token punctuation">)</span>
wrapper<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    slideLeft<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span>
    slideRight<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
wrapper<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseout'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    slideLeft<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span>
    slideRight<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
slideLeft<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">_animate</span><span class="token punctuation">(</span>ul<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'over'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
slideRight<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">_animate</span><span class="token punctuation">(</span>ul<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'over'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_9-本地存储-sessionstorage-localstorage"><a href="#_9-本地存储-sessionstorage-localstorage" class="header-anchor">#</a> 9.本地存储 <code>sessionStorage</code> &amp; <code>localStorage</code></h4> <ul><li><code>sessionStorage</code> 最多存5M
<ul><li>生命周期 ：关闭浏览器窗口数据就会消失</li> <li>同一个窗口/页面可以共享</li> <li>以键值对存储</li> <li>刷新浏览器也不会消失</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span><span class="token string">'value'</span><span class="token punctuation">)</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span>
sessionStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>localStorage</code> 最多存20M
<ul><li>生命周期：永久有效，除非手动删除，关闭页面也存在</li> <li>可以多个页面共享，同一浏览器共享</li> <li>以键值对存储</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span><span class="token string">'value'</span><span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2b158257.js" defer></script><script src="/assets/js/2.52bd5051.js" defer></script><script src="/assets/js/9.cb0205bc.js" defer></script>
  </body>
</html>
